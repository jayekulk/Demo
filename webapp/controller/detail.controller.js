sap.ui.define(["sap/ui/core/mvc/Controller","sap/m/MessageToast","sap/ui/model/json/JSONModel" ], 

function(Controller,MessageToast,JSONModel) {
	"use strict";
	return Controller.extend("Project1.controller.detail", {
		onInit: function() {
			  /* var pid = new sap.ui.model.json.JSONModel("");
			this.setModel(pid, "Pid");*/

				var oRouter = sap.ui.core.UIComponent.getRouterFor(this); //Get Hold of Router
				oRouter.getRoute("Detail").attachPatternMatched(this._onObjectMatched, this);
				//Attach Router Pattern
			},
			_onObjectMatched: function(oEvent) {
				//Bind the Context to Detail View
				this.getView().bindElement({
					path: decodeURIComponent("/" + oEvent.getParameter("arguments").view2),
					model: "Product"
				});
			},
			onNav: function() {

			},
			/**
			 *@memberOf Project1.controller.detail
			 */
		onOrderNow: function() {
				//This code was generated by the layout editor.
				var length = this.getView().getModel("Product").getData().ProductCollection.length;
				var quantity = this.getView().byId("__input0").getValue();
			
					var id  = this.getView().getModel("Pid").getData();
               for(var i=0; i<length; i++){
				var id1 = this.getView().getModel("Product").getData().ProductCollection[i].ProductId;
					var units1 = this.getView().getModel("Product").getData().ProductCollection[i].Quantity;
					if (id === id1)
					{
					if(quantity <= units1){
					MessageToast.show("Order Confirmed");
					}
					 else {
					MessageToast.show("Quantity not available");
				}
               }
		
			
				 
				
			}
		
		},
		 pdf:function(oEvent){  
              
           var fnSuccess = function(JSON, Product) {  
      
                var columns = ["ID","First Name","Last Name","Phone No."];  
                var data = [];  
                    for(var i=0;i<oData.results.length;i++)   
                    {  
                        data[i]=[oData.results[i].Id,oData.results[i].Fname,oData.results[i].Lname,oData.results[i].Phoneno];  
                    }  
      
                var doc = new jsPDF('p', 'pt');  
                doc.autoTable(columns, data);  
                doc.save("DemoData.pdf");  
            };  
		 
		 } 
		
			
	});
});